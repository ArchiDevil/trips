{% extends 'base.html' %} {% block content %}

<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

<script>
    $("#trips-link").addClass("active");

    $(function () {
        $('input[name="daterange"]').daterangepicker({
            opens: 'right',
            autoApply: true,
            locale: {
                format: "YYYY-MM-DD"
            }
        }, function (start, end, label) {
            console.log(end.diff(start, 'days'));
        });
    });

    $(document).ready(function () {
        $("#input-form").validate({
            rules: {
                name: {
                    required: true,
                },
                attendees: {
                    required: true,
                    number: true,
                    min: 0
                }
            },
            errorPlacement: function (error, element) {
                errorLabelName = element.attr("id") + "_invalid";
                var oldElement = $("#" + errorLabelName);
                if (oldElement !== undefined) {
                    oldElement.remove();
                }
                error.appendTo(element.parent());
                $(error).removeClass("is-invalid").addClass("invalid-feedback").attr("id", errorLabelName);
            },
            errorClass: "is-invalid",
            validClass: "is-valid",
            errorElement: "div"
        });
    });
</script>

<div class="container col-md-6">
    <h1 class="display-4 my-3">Add a new trip</h1>
</div>

<div class="container col-md-6 border shadow">
    <form class="m-3" id="input-form" action="{{ url_for('trips.add') }}" method="POST">
        <div class="form-group">
            <label for="input-name">Trip name</label>
            <input type="text" class="form-control" id="input-name" name="name" aria-describedby="name-help" placeholder="Enter name" autofocus>
            <small id="name-help" class="form-text text-muted">This is the name of your trip. Make sure this is a great name.</small>
        </div>

        <div class="form-group">
            <label for="input-date">Dates of the trip</label>
            <input class="form-control" type="text" id="input-date" name="daterange" />
        </div>

        <div class="form-group">
            <label for="input-attendees">How many people go to this trip?</label>
            <input class="form-control" type="text" id="input-attendees" name="attendees" />
        </div>

        <button type="submit" class="btn btn-primary">Add</button>
        <a class="btn btn-secondary" href="{{ url_for('trips.index') }}">Close</a>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
{% endblock %}